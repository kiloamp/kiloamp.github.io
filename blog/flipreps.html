<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>flipreps</title>
    <link rel="stylesheet" type="text/css" href="sources/c2s2.css">
  </head>

  <body >
    <div class="hero green-gradient">
      <h3>Aircraft Navigation Log on a $20 receipt printer</h3>
    </div>
    <div class="strip">
      <div class="centered box">
        <p>
          Howdy! I’m Carlos and I like tech and planes (among other things like
          having massive servings of pasta). I’m currently studying for my
          commercial license in Europe. So far most of my flight training has
          happened on a Piper PA28 (the -180 variant)
        </p>
        <img
          src="sources/flipreps_files/image2.png"
          alt="alt text"
          style="margin-top: 30px; max-width: 600px; width: 80%;"
        />
        <figcaption>my school's plane doesn't look this pretty</figcaption>
        <p>
          It’s from the late 60s, often there are at least 1 or 2 things that
          don’t work properly and it shows - the thing is old! I imagine at some
          point I’ll jump into modern jets, and so I am happy to spend the first
          few hundred hours being as much of an ‘aviator’ as possible.
        </p>
        <p>
          As a bit of background, these planes are single pilot operation, so
          the idea is that whoever is flying is doing the navigating, the
          radios, the checklist, the flying, the communicating and the looking
          out and in. It can get busy. The one thing on this plane that is just
          hard to adapt to is how cramped it is and hot it can get - I’m talking
          about 38C/100F in a vibrating machine for 3h. And I say that with the
          knowledge of all the other issues this plane has (magnetos may drop
          excessively, gyro basically useless, fuel pump is old…) We get these
          things called kneeboards, that provide a ‘comfy’ space for us to write
          down things like the weather reports, the tower instructions and how
          accurate our routing plan is as we follow it along.
        </p>
        <p>
          The one thing on this plane that is just hard to adapt to is how
          cramped it is and hot it can get - I’m talking about 38C/100F in a
          vibrating machine for 3h. And I say that with the knowledge of all the
          other issues this plane has (magnetos may drop excessively, gyro
          basically useless, fuel pump is old…) We get these things called
          kneeboards, that provide a ‘comfy’ space for us to write down things
          like the weather reports, the tower instructions and how accurate our
          routing plan is as we follow it along.
        </p>
        <p>
          We get these things called kneeboards, that provide a ‘comfy’ space
          for us to write down things like the weather reports, the tower
          instructions and how accurate our routing plan is as we follow it
          along.
        </p>
        <img
          src="sources/flipreps_files/image7.png"
          alt="alt text"
          style="margin-top: 30px; max-width: 600px; width: 80%;"
        />
        <figcaption>
          how comfortable is that! does it come with a cupholder?
        </figcaption>
        <p>
          Whilst this picture looks pretty spacious, my plane is more cramped
          than that, and I’m sitting at a weirder angle. In my kneeboard /
          floating around the plane I have: 
          <ul>
            <li><a href="https://live.staticflickr.com/3070/5823042998_7de069bf04_b.jpg ">Checklist</a> (before taking off checklist, taxiing checklist, …)</li>
            <li><a href="https://en.wikipedia.org/wiki/Sectional_aeronautical_chart">Map</a> (big unfolding 1:400 map) (like the ones in the cartoons that open and open and open)</li>
            <li>Piece of paper to jot on (weather, tower instructions, tic tac toe..)</li>
            <li>Nav log (more on this soon)</li>
          </ul>    
        </p>
        <p>
            All of those documents have to be hot swapped for one another at different phases of the flight, and so there is actually a pretty big market for kneeboards and all the shapes and sizes they can come in. 
        </p>
        <img
          src="sources/flipreps_files/image1.png"
          alt="alt text"
          style="margin-top: 30px; max-width: 600px; width: 80%;"
        />
        <figcaption>
          the kneeboard, the cargo pants of the air
        </figcaption>
        <p>
            The Nav log is the term we give for a paper with point-to-point instructions from one waypoint to another. It typically has a lot of information to help us navigate (and even more info that we really use but had to write down to work out other things). Here’s a sample, but don’t worry too much about reading it.

        </p>
        <img
          src="sources/flipreps_files/image3.png"
          alt="alt text"
          style="margin-top: 30px; max-width: 600px; width: 80%;"
        />
        <figcaption>
          an example of a Navigation Log
        </figcaption>
        <p>
            Realistically, out of all those numbers, I’m only really looking at a few because things like the wind correction angle only really matter so that I can work out other information (except in some edge cases).
        </p>
        <p>
            Since I’ve grown happy with how I work out the items in the Nav log (an important skill when you are in training), now I occasionally use this tool (screenshot below) which automatically fills most of those fields for me. For the most part it is repetitive work, like “how do my heading and wind interact with each other, hmm let me see.. <basic math here>”. 
        </p>
        <p>
            I simply look at my 1:400 map and then pick out the waypoints in this browser tool. This allows me to prep other parts of my fight that I might be doing that lesson whilst still having a fleshed out Nav log!
        </p>
        <img
          src="sources/flipreps_files/image5.png"
          alt="alt text"
          style="margin-top: 30px; max-width: 600px; width: 80%;"
        />
        <figcaption>
          one of the tools available for flight planning
        </figcaption>
        <p>
            I then get a PDF which I can then copy by hand into my Kneeboard nav log. Sweet!
        </p>
        <p>
            Like I said I also like computers and toyin’ around with them, and so the other day I bought a receipt printer. Why? Well… 
            <ul>
                <li>they seemed super cool for small projects</li>
                <li>don’t use ink</li>
                <li>can get them second hand easily</li>
                <li>plug and play into Linux (/dev/usb/lp0)</li>
                <li>look cute (mostly through the use of googly eyes)</li>
              </ul>   
        </p>
        <p>
            So then I thought… hey… what about the windshield pillar or a-pillar (if you speak cars) in the plane?
        </p>
        <img
          src="sources/flipreps_files/image4.png"
          alt="alt text"
          style="margin-top: 30px; max-width: 600px; width: 80%;"
        />
        <figcaption>
          it's strange to find unsued space in a cockpit
        </figcaption>
        <p>
            I mean, that thing is in the middle of the cockpit, serves no function (other than the obvious one of preventing a total structural collapse) and is strangely receipt sized.. surely.. I could use that to alleviate some of my issues with the cramped kneeboard. 
        </p>
        <p>
            Why don’t I make a <a href="https://github.com/kiloamp/fliprep">git project</a> that will let me have nicely formatted receipt prints of my nav log.  
        </p>
        <p>
            I thought the Navlog would be the easiest thing to do so that’s where I started. Oh how wrong I was.
        </p>
        <p>
            Knowing that I’ll be using SkyVector for the foreseeable future I wrote a quick (ish) script to grab their Nav log. Ideally I could export a Navlog in some format like the Garmin one, but not really - only a weirdly formatted PDF. 
        </p>
        <p>
            Anyways, fair enough -- I’ll just grab the whole PDF text with Ctrl+A and then ask the user to paste it into my script.
        </p>
        <p>
            Thanks to: 
            <ul>
                <li>Regex (special weird code that searches for patterns in code)
                    <ul>
                        <li>
                            think “take this ‘he3ll4o, $$th3er8e’ and remove everything that isn’t a letter
                        </li>
                    </ul>
                </li>
                <li>String splitting (less weird looking code that lets you play around with a chunk of text)
                    <ul>
                        <li>
                            think “from the above example, split hello there into [“hello”], [“there”]
                        </li>
                    </ul>
                </li>
                <li>Some math to fill in here and there 
                    <ul>
                        <li>
                            think “once we have [speed] and [distance] from the PDF work out the time taken”

                        </li>
                    </ul>
                </li>
              </ul>  
            </p>
            <p>
                I actually got a somewhat pretty looking Python dictionary / JSON of every leg of the journey. 
            </p>
            <pre style="background-color: #f0f0f0; border: 1px solid #ccc; text-align: left; margin: 0; padding: 0; white-space: pre-wrap">
{
    "from": null,
    "to": null,
    "wind_direction": null,
    "wind_speed": null,
    "temp": null,
    "temp_deviation": null,
    "TAS": null,
    "Track": null,
    "WCA": null,
    "TH": null,
    "Var": null,
    "Magnetic Heading": null,
    "Ground Speed": null,
    "Distance": null,
    "ETA": null,
    "CumulativeETA": null
}</pre>
            <p>
                Then that JSON was exported into a PHP file (thanks <a href="https://github.com/mike42/escpos-php/">Mike42’s escpos-php/ library</a>!) which is what I’m using for formatting text in the receipt printer (mostly just font size and text-wrapping) and boom!
            </p>
            <img
                src="sources/flipreps_files/image9.png"
                alt="alt text"
                style="margin-top: 30px; max-width: 600px; width: 80%;"
                />
            <figcaption>
                version 1 -- still with a few things to add!
            </figcaption>
            <p>
                I have to say it works surprisingly well. I use that to quickly understand where I am whilst I play with the map and communicate on our area’s busy air to air frequency. 
            </p>
            <p>
                I don’t consider this to be dangerous since I also carry with me the full Nav log, so at any doubt I have all the other details, but hey, it never hurts to have extra easily-accessible information in unused space! 
            </p>
            <p>
                The script also works for simpler things, like printing the lesson plan if you want to. Hopefully in version 2 I can make this feature a bit more extensive, and maybe have some nicer formatting, maybe a QR reference to the lesson plan, etc..etc… 
            </p>
            <img
                src="sources/flipreps_files/image6.png"
                alt="alt text"
                style="margin-top: 30px; max-width: 600px; width: 80%;"
                />
            <figcaption>
                the lesson plan is normally on an internal web app, I’d rather sellotape it to the plane! 
            </figcaption>
            <img
                src="sources/flipreps_files/image8.png"
                alt="alt text"
                style="margin-top: 30px; max-width: 600px; width: 80%;"
            />
            <figcaption>
                the welcome screen!
            </figcaption>
        </div>
    </div>
    <div class="hero yellow-gradient">
        <h3 style="font-size: 16px">
            Thank you so much for reading! <i>Feedback? Ideas? Hate? Coffee? </i>
        </h3>
        <h3 style="font-size: 16px">
            me(at)carloslagoa.com
        </h3>
    </div>
  </body>
</html>
